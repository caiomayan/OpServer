<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS2 Server Status Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
        }
    </style>
</head>
<body class="p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8">CS2 Server Status Test</h1>
        
        <!-- Server Status Card (Simplified for Testing) -->
        <div class="bg-white/5 border border-white/10 rounded-lg p-6 mb-8">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-semibold">A GREAT CHAOS 01</h2>
                <div class="flex items-center space-x-2">
                    <div id="server-status-dot" class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                    <span id="server-status-text" class="text-sm font-medium text-green-400">ONLINE</span>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div class="flex justify-between text-sm border-b border-white/10 pb-2">
                        <span class="text-white/60">Mapa</span>
                        <span id="server-map" class="font-mono">?</span>
                    </div>
                    <div class="flex justify-between text-sm border-b border-white/10 pb-2">
                        <span class="text-white/60">Jogadores</span>
                        <span id="server-players" class="font-mono">?</span>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="flex justify-between text-sm border-b border-white/10 pb-2">
                        <span class="text-white/60">Modo</span>
                        <span id="server-mode" class="font-mono">?</span>
                    </div>
                    <div class="flex justify-between text-sm border-b border-white/10 pb-2">
                        <span class="text-white/60">Lat√™ncia</span>
                        <span id="server-latency" class="text-green-400">?</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test Controls -->
        <div class="bg-white/5 border border-white/10 rounded-lg p-6">
            <h3 class="text-lg font-semibold mb-4">Test Controls</h3>
            <div class="space-x-4">
                <button id="test-mock-online" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm">
                    Test Online Data
                </button>
                <button id="test-mock-offline" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-sm">
                    Test Offline Data
                </button>
                <button id="test-random" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm">
                    Test Random Data
                </button>
            </div>
            
            <!-- Console Output -->
            <div class="mt-6">
                <h4 class="text-sm font-semibold mb-2">Console Output:</h4>
                <div id="console-output" class="bg-black/30 border border-white/20 rounded p-3 h-40 overflow-y-auto text-xs font-mono"></div>
            </div>
        </div>
    </div>

    <!-- Load the modules -->
    <script type="module">
        // Override console.log to show in UI
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        function addToConsole(message, type = 'log') {
            const output = document.getElementById('console-output');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type === 'error' ? 'text-red-400' : type === 'warn' ? 'text-yellow-400' : 'text-green-400';
            output.innerHTML += `<div class="${colorClass}">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };        // Import and test our modules
        try {
            const { CS2ServerStatus, ServerStatusManager } = await import('./src/cs2-server-status.js');
            console.log('‚úÖ CS2ServerStatus module loaded successfully');
            
            // Create test instance
            const serverStatus = new CS2ServerStatus({
                DEBUG_MODE: true,
                VERBOSE_LOGGING: true,
                UPDATE_INTERVAL: 5000
            });
            
            // Test update functions
            function testOnlineData() {
                const testData = {
                    name: 'A GREAT CHAOS 01',
                    map: 'Dust II',
                    players: { current: 15, max: 32 },
                    status: 'online',
                    ping: 25,
                    gameMode: 'Competitive',
                    secure: true,
                    lastUpdate: new Date().toISOString()
                };
                console.log('üß™ Testing online data...');
                serverStatus.updateUI(testData);
            }
            
            function testOfflineData() {
                const testData = {
                    name: 'A GREAT CHAOS 01',
                    map: '?',
                    players: { current: 0, max: 32 },
                    status: 'offline',
                    ping: null,
                    gameMode: '?',
                    secure: true,
                    lastUpdate: new Date().toISOString()
                };
                console.log('üß™ Testing offline data...');
                serverStatus.updateUI(testData);
            }
            
            function testRandomData() {
                const mockData = serverStatus.getMockData();
                console.log('üß™ Testing random mock data...');
                serverStatus.updateUI(mockData);
            }
            
            // Bind test buttons
            document.getElementById('test-mock-online').addEventListener('click', testOnlineData);
            document.getElementById('test-mock-offline').addEventListener('click', testOfflineData);
            document.getElementById('test-random').addEventListener('click', testRandomData);
            
            console.log('‚úÖ Test controls initialized');
            
            // Test initial update
            testRandomData();        } catch (error) {
            console.error('‚ùå Error loading CS2ServerStatus module:', error);
        }
    </script>
</body>
</html>
